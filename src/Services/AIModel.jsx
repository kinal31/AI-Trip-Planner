import { GoogleGenerativeAI } from "@google/generative-ai";

  
  const apiKey = import.meta.env.VITE_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  

    export  const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget, Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day  like \"day\" :\"Day 1\" plan with best time to visit in JSON format."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "I cannot directly access and display images or real-time pricing for hotels.  Hotel prices are incredibly dynamic and change constantly.  The geocoordinates and ratings will also need to be obtained from external APIs or mapping services which is beyond my current capabilities.  However, I can provide you with a JSON structure containing the *information you requested*, with placeholders where real-time data would go.  You will need to use a hotel booking site (like Booking.com, Expedia, Kayak) and a mapping service (like Google Maps) to fill in the missing data.\n\n\n```json\n{\n  \"trip\": {\n    \"location\": \"Las Vegas, Nevada\",\n    \"duration\": \"3 Days\",\n    \"travelers\": \"Couple\",\n    \"budget\": \"Cheap\"\n  },\n  \"hotels\": [\n    {\n      \"hotelName\": \"Hotel Name 1 (Example)\",\n      \"hotelAddress\": \"123 Example Street, Las Vegas, NV, USA\",\n      \"price\": \"Placeholder - Check Booking Sites\",\n      \"hotelImageUrl\": \"Placeholder URL\",\n      \"geoCoordinates\": { \"latitude\": \"Placeholder\", \"longitude\": \"Placeholder\" },\n      \"rating\": \"Placeholder - Check Review Sites\",\n      \"description\": \"Placeholder - Hotel Description\"\n    },\n    {\n      \"hotelName\": \"Hotel Name 2 (Example)\",\n      \"hotelAddress\": \"456 Another Street, Las Vegas, NV, USA\",\n      \"price\": \"Placeholder - Check Booking Sites\",\n      \"hotelImageUrl\": \"Placeholder URL\",\n      \"geoCoordinates\": { \"latitude\": \"Placeholder\", \"longitude\": \"Placeholder\" },\n      \"rating\": \"Placeholder - Check Review Sites\",\n      \"description\": \"Placeholder - Hotel Description\"\n    },\n    {\n      \"hotelName\": \"Budget Inn (Example)\",\n      \"hotelAddress\": \"789 Budget Lane, Las Vegas, NV, USA\",\n      \"price\": \"Placeholder - Check Booking Sites\",\n      \"hotelImageUrl\": \"Placeholder URL\",\n      \"geoCoordinates\": { \"latitude\": \"Placeholder\", \"longitude\": \"Placeholder\" },\n      \"rating\": \"Placeholder - Check Review Sites\",\n      \"description\": \"Placeholder - Hotel Description\"\n    }\n  ],\n  \"itinerary\": {\n    \"day\": [\n      {\n        \"day\": \"Day 1\",\n        \"plan\": [\n          {\n            \"placeName\": \"Fremont Street Experience\",\n            \"placeDetails\": \"Free walking area with light shows, street performers, and casinos.\",\n            \"placeImageUrl\": \"Placeholder URL\",\n            \"geoCoordinates\": { \"latitude\": \"Placeholder\", \"longitude\": \"Placeholder\" },\n            \"ticketPricing\": \"Free\",\n            \"rating\": \"Placeholder\",\n            \"time\": \"Evening (7 PM - 11 PM)\"\n          },\n          {\n            \"placeName\": \"Old Las Vegas Mormon Fort State Historic Park\",\n            \"placeDetails\": \"Historical site offering a glimpse into early Las Vegas history\",\n            \"placeImageUrl\": \"Placeholder URL\",\n            \"geoCoordinates\": { \"latitude\": \"Placeholder\", \"longitude\": \"Placeholder\" },\n            \"ticketPricing\": \"Placeholder\",\n            \"rating\": \"Placeholder\",\n            \"time\": \"Afternoon (2 PM - 4 PM)\"\n          }\n        ]\n      },\n      {\n        \"day\": \"Day 2\",\n        \"plan\": [\n          {\n            \"placeName\": \"The Strip (Walking Tour)\",\n            \"placeDetails\": \"Walk the famous Las Vegas Strip, admire the hotels and atmosphere.\",\n            \"placeImageUrl\": \"Placeholder URL\",\n            \"geoCoordinates\": { \"latitude\": \"Placeholder\", \"longitude\": \"Placeholder\" },\n            \"ticketPricing\": \"Free\",\n            \"rating\": \"Placeholder\",\n            \"time\": \"Morning (9 AM - 1 PM)\"\n          },\n          {\n            \"placeName\": \"Seven Magic Mountains\",\n            \"placeDetails\": \"Colorful art installation south of Las Vegas (requires transportation).\",\n            \"placeImageUrl\": \"Placeholder URL\",\n            \"geoCoordinates\": { \"latitude\": \"Placeholder\", \"longitude\": \"Placeholder\" },\n            \"ticketPricing\": \"Free (parking may apply)\",\n            \"rating\": \"Placeholder\",\n            \"time\": \"Afternoon (3 PM - 5 PM)\"\n          }\n        ]\n      },\n      {\n        \"day\": \"Day 3\",\n        \"plan\": [\n          {\n            \"placeName\": \"Neon Museum\",\n            \"placeDetails\": \"Museum of vintage Las Vegas signs.\",\n            \"placeImageUrl\": \"Placeholder URL\",\n            \"geoCoordinates\": { \"latitude\": \"Placeholder\", \"longitude\": \"Placeholder\" },\n            \"ticketPricing\": \"Placeholder - Check website\",\n            \"rating\": \"Placeholder\",\n            \"time\": \"Morning (10 AM - 12 PM)\"\n          },\n          {\n            \"placeName\": \"In-N-Out Burger (for a cheap & classic Vegas meal!)\",\n            \"placeDetails\": \"Iconic West Coast burger joint.\",\n            \"placeImageUrl\": \"Placeholder URL\",\n            \"geoCoordinates\": { \"latitude\": \"Placeholder\", \"longitude\": \"Placeholder\" },\n            \"ticketPricing\": \"Placeholder\",\n            \"rating\": \"Placeholder\",\n            \"time\": \"Lunch (1 PM - 2 PM)\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\nRemember to replace the placeholders with actual data from your research.  Consider using public transportation (buses) whenever possible to minimize transportation costs in Las Vegas.  Look for happy hour deals on food and drinks to save money.  Have a great trip!\n"},
          ],
        },
        {
        role: "model",
        parts: [
          {text: "Okay, let's expand on the itinerary for each day, adding more options and details for a cheap Las Vegas trip.  Remember that you'll still need to check pricing and availability yourself using online resources.\n\n\n```json\n{\n  \"trip\": {\n    \"location\": \"Las Vegas, Nevada\",\n    \"duration\": \"3 Days\",\n    \"travelers\": \"Couple\",\n    \"budget\": \"Cheap\"\n  },\n  \"hotels\": [\n    // ... (Hotel details remain the same as previous response) ...\n  ],\n  \"itinerary\": {\n    \"day\": [\n      {\n        \"day\": \"Day 1: Downtown Exploration & Evening Lights\",\n        \"plan\": [\n          {\n            \"placeName\": \"Fremont Street Experience\",\n            \"placeDetails\": \"Free walking area with Viva Vision light shows, street performers, zip lines, and casinos.  Plenty of free entertainment.\",\n            \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/Fremont_Street_Experience_at_night.jpg/1280px-Fremont_Street_Experience_at_night.jpg\",\n            \"geoCoordinates\": { \"latitude\": 36.1662, \"longitude\": -115.1404},\n            \"ticketPricing\": \"Free (some activities extra)\",\n            \"rating\": \"4.5\",\n            \"time\": \"Afternoon & Evening (2 PM - 10 PM)\"\n          },\n          {\n            \"placeName\": \"Container Park\",\n            \"placeDetails\": \"Unique shopping and dining area made from shipping containers. Check out the giant praying mantis sculpture.\",\n            \"placeImageUrl\": \"Placeholder URL - Search online\",\n            \"geoCoordinates\": { \"latitude\": 36.1683, \"longitude\": -115.1371},\n            \"ticketPricing\": \"Free entry (shopping/dining extra)\",\n            \"rating\": \"4\",\n            \"time\": \"Late afternoon (5 PM - 7 PM)\"\n          },\n          {\n            \"placeName\": \"Pizza Rock\",\n            \"placeDetails\": \"Affordable and delicious pizza in downtown Las Vegas.\",\n            \"placeImageUrl\": \"Placeholder URL - Search online\",\n            \"geoCoordinates\": { \"latitude\": 36.1672, \"longitude\": -115.1400},\n            \"ticketPricing\": \"Budget-friendly\",\n            \"rating\": \"4.2\",\n            \"time\": \"Dinner (8 PM)\"\n          }\n        ]\n      },\n      {\n        \"day\": \"Day 2: The Strip & Budget-Friendly Fun\",\n        \"plan\": [\n          {\n            \"placeName\": \"The Bellagio Fountains\",\n            \"placeDetails\": \"Free water show with music and lights.  Best viewed from the sidewalk.\",\n            \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Bellagio_fountains_show.jpg/1280px-Bellagio_fountains_show.jpg\",\n            \"geoCoordinates\": { \"latitude\": 36.1108, \"longitude\": -115.1722},\n            \"ticketPricing\": \"Free\",\n            \"rating\": \"4.8\",\n            \"time\": \"Morning/Afternoon (11 AM - 1 PM)\"\n          },\n          {\n            \"placeName\": \"Walk the Strip (south to north)\",\n            \"placeDetails\": \"Explore the architecture and atmosphere of the Strip. Stop at free attractions like the Venetian canals and the volcano at the Mirage (check showtimes).\",\n            \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Las_Vegas_Strip_from_the_High_Roller.jpg/1280px-Las_Vegas_Strip_from_the_High_Roller.jpg\",\n            \"geoCoordinates\": { \"latitude\": 36.1146, \"longitude\": -115.1728},\n            \"ticketPricing\": \"Free\",\n            \"rating\": \"5\",\n            \"time\": \"Afternoon (1 PM - 6 PM)\"\n          },          \n          {\n            \"placeName\": \"In-N-Out Burger\",\n            \"placeDetails\": \"A West Coast classic for a cheap and tasty dinner.\",\n            \"placeImageUrl\": \"Placeholder URL - Search online\",\n            \"geoCoordinates\": { \"latitude\": \"Find location online\", \"longitude\": \"Find location online\"},\n            \"ticketPricing\": \"Budget-friendly\",\n            \"rating\": \"4.5\",\n            \"time\": \"Dinner (7 PM)\"\n          }\n        ]\n      },\n      {\n        \"day\": \"Day 3: Nature & Relaxation\",\n        \"plan\": [\n          {\n            \"placeName\": \"Red Rock Canyon National Conservation Area\",\n            \"placeDetails\": \"Scenic drives and hiking trails outside of the city (requires transportation - consider a rideshare).\",\n            \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/1/17/Red_Rock_Canyon_from_Calico_Hills_Trail.jpg/1280px-Red_Rock_Canyon_from_Calico_Hills_Trail.jpg\",\n            \"geoCoordinates\": { \"latitude\": 36.1910, \"longitude\": -115.5238},\n            \"ticketPricing\": \"Park entrance fee applies\",\n            \"rating\": \"4.7\",\n            \"time\": \"Full Day (8 AM - 5 PM)\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\nRemember to replace the placeholder image URLs and fill in missing details based on your research!  This expanded itinerary provides more options and a fuller experience for your budget-friendly trip.  Enjoy!\n"},
        ],
      },
      {
        role: "user",
        parts: [
          {text: "give me more places for each day\n"},
        ],
      },
      {
        role: "model",
        parts: [
          {text: "Okay, here's an expanded itinerary with more places for each day in Las Vegas, still keeping a budget-conscious approach.  Remember that you'll need to fill in the placeholders with actual data from online travel resources.\n\n```json\n{\n  \"tripName\": \"Las Vegas Budget Trip for Couples\",\n  \"duration\": \"3 Days\",\n  \"budget\": \"Cheap\",\n  \"travelers\": \"Couple\",\n  \"hotels\": [ \n    // ... (Hotel information -  fill in the placeholders as before) ...\n  ],\n  \"itinerary\": {\n    \"day\": [\n      {\n        \"dayName\": \"Day 1: Downtown Exploration\",\n        \"plan\": [\n          {\n            \"placeName\": \"Fremont Street Experience\",\n            \"placeDetails\": \"Free walking area with light shows, street performers.\",\n            \"placeImageUrl\": \"PLACEHOLDER_IMAGE_URL_FREMONT\",\n            \"geoCoordinates\": \"PLACEHOLDER_LATITUDE_FREMONT,PLACEHOLDER_LONGITUDE_FREMONT\",\n            \"ticketPricing\": \"Free\",\n            \"rating\": \"PLACEHOLDER_RATING_FREMONT\",\n            \"timeTravel\": \"Evening (7pm-10pm)\"\n          },\n          {\n            \"placeName\": \"Neon Museum\",\n            \"placeDetails\": \"Outdoor museum showcasing vintage Vegas signs.\",\n            \"placeImageUrl\": \"PLACEHOLDER_IMAGE_URL_NEON_MUSEUM\",\n            \"geoCoordinates\": \"PLACEHOLDER_LATITUDE_NEON_MUSEUM,PLACEHOLDER_LONGITUDE_NEON_MUSEUM\",\n            \"ticketPricing\": \"PLACEHOLDER_PRICE_NEON_MUSEUM\",\n            \"rating\": \"PLACEHOLDER_RATING_NEON_MUSEUM\",\n            \"timeTravel\": \"Afternoon (2pm-4pm)\"\n          },\n          {\n            \"placeName\": \"Container Park\",\n            \"placeDetails\": \"Unique shopping and dining area made of shipping containers.\",\n            \"placeImageUrl\": \"PLACEHOLDER_IMAGE_URL_CONTAINER_PARK\",\n            \"geoCoordinates\": \"PLACEHOLDER_LATITUDE_CONTAINER_PARK,PLACEHOLDER_LONGITUDE_CONTAINER_PARK\",\n            \"ticketPricing\": \"Free entry (shopping/dining costs extra)\",\n            \"rating\": \"PLACEHOLDER_RATING_CONTAINER_PARK\",\n            \"timeTravel\": \"Late afternoon (4:30pm-6pm)\"\n          },\n          {\n            \"placeName\": \"Downtown Las Vegas Brewery Tour (Optional)\",\n            \"placeDetails\": \"Several breweries offer tours and tastings.\",\n            \"placeImageUrl\": \"PLACEHOLDER_IMAGE_URL_BREWERY\",\n            \"geoCoordinates\": \"PLACEHOLDER_LATITUDE_BREWERY,PLACEHOLDER_LONGITUDE_BREWERY\",\n            \"ticketPricing\": \"PLACEHOLDER_PRICE_BREWERY\",\n            \"rating\": \"PLACEHOLDER_RATING_BREWERY\",\n            \"timeTravel\": \"Evening (after Fremont Street)\"\n          }\n        ]\n      },\n      {\n        \"dayName\": \"Day 2: The Strip Highlights\",\n        \"plan\": [\n          {\n            \"placeName\": \"The Strip (walking tour)\",\n            \"placeDetails\": \"Walk the length of the Strip, admiring the hotels and sights.\",\n            \"placeImageUrl\": \"PLACEHOLDER_IMAGE_URL_STRIP\",\n            \"geoCoordinates\": \"PLACEHOLDER_LATITUDE_STRIP,PLACEHOLDER_LONGITUDE_STRIP\",\n            \"ticketPricing\": \"Free\",\n            \"rating\": \"PLACEHOLDER_RATING_STRIP\",\n            \"timeTravel\": \"Morning (9am-12pm)\"\n          },\n          {\n            \"placeName\": \"Bellagio Conservatory & Botanical Gardens\",\n            \"placeDetails\": \"Free attraction with stunning floral displays.\",\n            \"placeImageUrl\": \"PLACEHOLDER_IMAGE_URL_BELLAGIO\",\n            \"geoCoordinates\": \"PLACEHOLDER_LATITUDE_BELLAGIO,PLACEHOLDER_LONGITUDE_BELLAGIO\",\n            \"ticketPricing\": \"Free\",\n            \"rating\": \"PLACEHOLDER_RATING_BELLAGIO\",\n            \"timeTravel\": \"Afternoon (12:30pm-1:30pm)\"\n          },\n          {\n            \"placeName\": \"Caesars Palace Fountains\",\n            \"placeDetails\": \"Free show with water, fire, and music.\",\n            \"placeImageUrl\": \"PLACEHOLDER_IMAGE_URL_CAESARS_FOUNTAINS\",\n            \"geoCoordinates\": \"PLACEHOLDER_LATITUDE_CAESARS_FOUNTAINS,PLACEHOLDER_LONGITUDE_CAESARS_FOUNTAINS\",\n            \"ticketPricing\": \"Free\",\n            \"rating\": \"PLACEHOLDER_RATING_CAESARS_FOUNTAINS\",\n            \"timeTravel\": \"Afternoon (2pm-2:30pm)\"\n          },\n          {\n            \"placeName\": \"Mirage Volcano\",\n            \"placeDetails\": \"Free show with erupting volcano and fire.\",\n            \"placeImageUrl\": \"PLACEHOLDER_IMAGE_URL_MIRAGE_VOLCANO\",\n            \"geoCoordinates\": \"PLACEHOLDER_LATITUDE_MIRAGE_VOLCANO,PLACEHOLDER_LONGITUDE_MIRAGE_VOLCANO\",\n            \"ticketPricing\": \"Free\",\n            \"rating\": \"PLACEHOLDER_RATING_MIRAGE_VOLCANO\",\n            \"timeTravel\": \"Evening (8pm-8:30pm)\"\n          },\n          {\n            \"placeName\": \"Free Show (check hotel schedules)\",\n            \"placeDetails\": \"Many hotels offer free shows, like fountains or other attractions\",\n            \"placeImageUrl\": \"PLACEHOLDER_IMAGE_URL_FREE_SHOW\",\n            \"geoCoordinates\": \"PLACEHOLDER_LATITUDE_FREE_SHOW,PLACEHOLDER_LONGITUDE_FREE_SHOW\",\n            \"ticketPricing\": \"Free\",\n            \"rating\": \"PLACEHOLDER_RATING_FREE_SHOW\",\n            \"timeTravel\": \"Evening (after Mirage Volcano)\"\n          }\n        ]\n      },\n      {\n        \"dayName\": \"Day 3: Beyond the Strip & Relaxation\",\n        \"plan\": [\n          {\n            \"placeName\": \"Seven Magic Mountains\",\n            \"placeDetails\": \"Art installation outside of the city, requires transportation.\",\n            \"placeImageUrl\": \"PLACEHOLDER_IMAGE_URL_SEVEN_MAGIC_MOUNTAINS\",\n            \"geoCoordinates\": \"PLACEHOLDER_LATITUDE_SEVEN_MAGIC_MOUNTAINS,PLACEHOLDER_LONGITUDE_SEVEN_MAGIC_MOUNTAINS\",\n            \"ticketPricing\": \"Free\",\n            \"rating\": \"PLACEHOLDER_RATING_SEVEN_MAGIC_MOUNTAINS\",\n            \"timeTravel\": \"Morning (10am-1pm) - Requires transportation (rideshare recommended)\"\n          },\n          {\n            \"placeName\": \"Pool time at your hotel (if available)\",\n            \"placeDetails\": \"Relax and enjoy the pool.\",\n            \"placeImageUrl\": \"PLACEHOLDER_IMAGE_URL_POOL\",\n            \"geoCoordinates\": \"PLACEHOLDER_LATITUDE_POOL,PLACEHOLDER_LONGITUDE_POOL\",\n            \"ticketPricing\": \"Free (Usually included)\",\n            \"rating\": \"PLACEHOLDER_RATING_POOL\",\n            \"timeTravel\": \"Afternoon (2pm-5pm)\"\n          },\n          {\n            \"placeName\": \"Red Rock Canyon National Conservation Area (Optional, requires car)\",\n            \"placeDetails\": \"Scenic drives and hiking trails.  Entrance fee applies.\",\n            \"placeImageUrl\": \"PLACEHOLDER_IMAGE_URL_RED_ROCK\",\n            \"geoCoordinates\": \"PLACEHOLDER_LATITUDE_RED_ROCK,PLACEHOLDER_LONGITUDE_RED_ROCK\",\n            \"ticketPricing\": \"PLACEHOLDER_PRICE_RED_ROCK\",\n            \"rating\": \"PLACEHOLDER_RATING_RED_ROCK\",\n            \"timeTravel\": \"Afternoon/Evening (depending on Seven Magic Mountains visit)\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\nRemember to check the operating hours and ticket prices for all locations before your trip.  Prioritize free activities to stay within your budget.  Consider using public transportation or ride-sharing services to minimize transportation costs.  Also, pack snacks and water to reduce food expenses.\n"},
        ],
      },
      ],
    });
  